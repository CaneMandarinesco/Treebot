import requests
import json

url = "https://api.treedom.net/graphql"

def get_tree_data(treeId):
    payload='query=query%20%20%7B%20tree%3ATree(id%3A%22' + treeId + '%22)%7B%0A%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20treeId%0A%20%20%20%20%20%20%20%20status%0A%20%20%20%20%20%20%20%20lat%0A%20%20%20%20%20%20%20%20lng%0A%20%20%20%20%20%20%20%20location%0A%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20timezone%0A%20%20%20%20%20%20%20%20dayTime%0A%20%20%20%20%20%20%20%20picture%7B%0A%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20assignedOn%0A%20%20%20%20%20%20%20%20user%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20userType%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20initialUser%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20userType%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20gift%7B%0A%20%20%20%20%20%20%20%20%20%20uuid%0A%20%20%20%20%20%20%20%20%20%20code%0A%20%20%20%20%20%20%20%20%20%20locale%0A%20%20%20%20%20%20%20%20%20%20owner%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20message%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20giftTag%0A%20%20%20%20%20%20%20%20%20%20deliveryType%0A%20%20%20%20%20%20%20%20%20%20email%0A%20%20%20%20%20%20%20%20%20%20sendAt%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20date%0A%20%20%20%20%20%20%20%20%20%20%20%20timezone%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20event%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20background%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20xlarge%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20%20%20published%0A%20%20%20%20%20%20%20%20%20%20user%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20%20%20userType%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20tankSize%0A%20%20%20%20%20%20%20%20specie%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20name%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20badges%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20icon%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20name%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20description%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20nurseryImage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20icon%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20scientificName%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20size%0A%20%20%20%20%20%20%20%20%20%20sayDescription%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20sayTitle%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20co2Capture%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20whichTree%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20originator%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20nurseryLat%0A%20%20%20%20%20%20%20%20%20%20%20%20nurseryLng%0A%20%20%20%20%20%20%20%20%20%20%20%20location%0A%20%20%20%20%20%20%20%20%20%20%20%20timezone%0A%20%20%20%20%20%20%20%20%20%20%20%20dayTime%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20country%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20%20%20name%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20flag%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20identityCardBackground%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xlarge%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20image%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xlarge%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20powers%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20foodsecurityPower%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20co2Power%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20incomePower%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20soilPower%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20limited%7B%0A%20%20%20%20%20%20%20%20%20%20limitedName%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20limitedNameSubTitle%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20icon%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20videoUrl%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20limitedTitle%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20limitedSubTitle%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20limitedDescription%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20color%0A%20%20%20%20%20%20%20%20%20%20footerBackground%0A%20%20%20%20%20%20%20%20%20%20limitedSerie%0A%20%20%20%20%20%20%20%20%20%20limitedSerieSlug%0A%20%20%20%20%20%20%20%20%20%20symbol%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20coupled%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20treeId%0A%20%20%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20%20%20gift%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20uuid%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20user%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20initialUser%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20specie%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20icon%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20limited%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20limitedName%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20limitedNameSubTitle%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20icon%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20likes%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20actions%7B%0A%20%20%20%20%20%20%20%20%20%20type%0A%20%20%20%20%20%20%20%20%20%20data%0A%20%20%20%20%20%20%20%20%20%20done%0A%20%20%20%20%20%20%20%20%20%20isVibrating%0A%20%20%20%20%20%20%20%20%20%20treeIcon%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20messages%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20message%0A%20%20%20%20%20%20%20%20%20%20isPrivate%0A%20%20%20%20%20%20%20%20%20%20isReadable%0A%20%20%20%20%20%20%20%20%20%20createdOn%0A%20%20%20%20%20%20%20%20%20%20user%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20%20%20slug%0A%20%20%20%20%20%20%20%20%20%20%20%20userType%0A%20%20%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20toUser%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20title%0A%20%20%20%20%20%20%20%20%20%20%20%20firstName%0A%20%20%20%20%20%20%20%20%20%20%20%20lastName%0A%20%20%20%20%20%20%20%20%20%20%20%20userType%0A%20%20%20%20%20%20%20%20%20%20%20%20avatar%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20small%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20medium%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20large%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20forecast%7B%0A%20%20%20%20%20%20%20%20%20%20temperature%0A%20%20%20%20%20%20%20%20%20%20time%0A%20%20%20%20%20%20%20%20%20%20timezone%0A%20%20%20%20%20%20%20%20%20%20windSpeed%0A%20%20%20%20%20%20%20%20%20%20icon%0A%20%20%20%20%20%20%20%20%20%20precipIntensity%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%7D&variables=%7B%7D'
    headers = {
    'Accept': 'application/json',
    'Accept-Language': 'it-IT,it;q=0.8,en-US;q=0.5,en;q=0.3',
    'Content-Type': 'application/x-www-form-urlencoded',
    'Origin': 'https://www.treedom.net',
    'Connection': 'keep-alive',
    'Sec-GPC': '1',
    'TE': 'Trailers'
    }

    response = requests.request("POST", url, headers=headers, data=payload)
    jresp    = json.loads(response.text)['data']['tree']
    
    # Data needed:
    # Name | Scientific Name
    # Assigned name
    # Position
    # Owner
    # Forest
    # Image
    data = {}
    data['name'] = jresp['specie']['name']['it']
    data['treeId'] = jresp['treeId']
    data['scientificName'] = jresp['specie']['scientificName']['name']
    data['assignedName'] = 'Nessuno' if jresp['name'] is None else jresp['name']
    data['location'] = 'Nessuna' if jresp['location'] is None else jresp['location'] 
    data['owner'] = {'name':jresp['user']['title'], 'slug':jresp['user']['slug']}
    data['forest'] = {'name':jresp['event']['name'], 'slug':jresp['event']['slug']}
    data['image'] = jresp['specie']['icon']['large'] if jresp['picture'] is None else jresp['picture']['large']
    return data

def get_tree_name(treeId):
    url = "https://api.treedom.net/graphql"

    payload='query=query%20%20%7B%20tree%3ATree(id%3A%22' + treeId + '%22)%7B%0A%20%20%20%20%20%20%20%20treeId%0A%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20specie%7B%0A%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20name%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20it%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%7D&variables=%7B%7D'
    headers = {
    'User-Agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:86.0) Gecko/20100101 Firefox/86.0',
    'Accept': 'application/json',
    'Accept-Language': 'it-IT,it;q=0.8,en-US;q=0.5,en;q=0.3',
    'Content-Type': 'application/x-www-form-urlencoded',
    'Origin': 'https://www.treedom.net',
    'Connection': 'keep-alive',
    'Referer': 'https://www.treedom.net/it/user/3-m/event/fratta-del-musicale-liceo/trees/E8K-8M8',
    'Sec-GPC': '1',
    'TE': 'Trailers'
    }

    response = requests.request("POST", url, headers=headers, data=payload)
    jresp = json.loads(response.text)['data']['tree']

    data = {}
    data['name'] = jresp['specie']['name']['it']
    data['assignedName'] = jresp['name']
    return data

def create_query_data(op, treeId=''):
    data = {}
    data['op'] = op
    data['treeId'] = treeId
    return json.dumps(data)